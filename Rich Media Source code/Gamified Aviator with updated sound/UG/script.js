let interval,flyAwayTimeout,autoStartTimeout,plane=document.getElementById("plane"),multiplierDisplay=document.getElementById("multiplier"),cashOutButton=document.getElementById("cashOutButton"),messageDisplay=document.getElementById("message"),initialMessage=document.getElementById("initialMessage"),background=document.getElementById("background"),gameContainer=document.querySelector(".game-container"),gameAudio=document.getElementById("gameAudio"),flyAwayAudio=document.getElementById("flyAwayAudio"),cta=document.getElementById("cta"),multiplier=1,isFlying=!1;function startGame(){plane.style.transition="none",plane.style.bottom="50px",plane.style.left="50px",multiplierDisplay.textContent="1.00x",isFlying=!1,initialMessage.style.display="flex",messageDisplay.style.display="none",multiplierDisplay.style.display="block",cashOutButton.style.display="block",cta.style.display="none",gameContainer.addEventListener("mouseover",launchPlane),autoStartTimeout=setTimeout(()=>{isFlying||launchPlane()},3500)}function launchPlane(){if(!isFlying){isFlying=!0,clearTimeout(autoStartTimeout),gameContainer.removeEventListener("mouseover",launchPlane),initialMessage.style.display="none",background.classList.add("moving"),plane.style.transition="bottom 2s, left 2s",plane.style.bottom="200px",plane.style.left="275px",setTimeout(()=>{plane.classList.add("floating")},2e3),gameAudio.play().catch(a=>console.error("Game audio playback failed:",a));let a=9e3+3e3*Math.random();flyAwayTimeout=setTimeout(()=>{isFlying&&flyAway()},a),interval=setInterval(()=>{isFlying&&(multiplier+=3.95,multiplierDisplay.textContent=`${multiplier.toFixed(2)}x`)},100)}}function cashOut(){isFlying&&(isFlying=!1,clearInterval(interval),clearTimeout(flyAwayTimeout),plane.style.transition="none",plane.classList.remove("floating"),plane.style.display="none",cashOutButton.style.display="none",displayMessage(`You cashed out at ${multiplier.toFixed(2)}x`),gameAudio.pause(),gameAudio.currentTime=0,showEndFrame())}function flyAway(){isFlying=!1,clearInterval(interval),plane.style.transition="bottom 1s linear, left 1s linear",plane.classList.remove("floating"),plane.style.bottom="450px",plane.style.left="600px",displayMessage("Cashed Out!"),gameAudio.pause(),gameAudio.currentTime=0,flyAwayAudio.play().catch(a=>console.error("FlyAway audio playback failed:",a)),showEndFrame()}function showEndFrame(){setTimeout(()=>{background.classList.remove("moving"),background.classList.add("cta"),multiplierDisplay.style.display="none",cashOutButton.style.display="none",cta.style.display="block",background.addEventListener("click",redirectToNewLink)},2e3)}function redirectToNewLink(){window.open("https://www.betkumi.co.ke/?utm_source=paidmedia&utm_medium=suss-gamified-ads&utm_campaign=aviator-gamified-ad","_blank"),background.removeEventListener("click",redirectToNewLink)}function displayMessage(a){messageDisplay.textContent=a,messageDisplay.style.display="block",setTimeout(()=>{messageDisplay.style.display="none"},3e3)}cashOutButton.addEventListener("click",cashOut),window.addEventListener("load",startGame);