var currTile,otherTile,timer,rows=4,columns=4,turns=0,redirected=!0,timerDuration=20;window.onload=function(){let e=[];for(let a=1;a<=16;a++)e.push(a.toString());let a=e.slice(0,8),f=e.slice(8);for(let c,a=0;a<f.length;a++)c=Math.floor(Math.random()*f.length),[f[a],f[c]]=[f[c],f[a]];let g=a.concat(f);for(let d=0;d<rows;d++)for(let a=0;a<columns;a++){let b=document.createElement("img"),c=d*columns+a;b.src="./assets/"+g[c]+".jpg",b.dataset.index=g[c],8>c?b.classList.add("fixed"):(b.classList.add("draggable"),b.setAttribute("draggable","true"),b.addEventListener("dragstart",handleInteraction),b.addEventListener("dragstart",dragStart),b.addEventListener("dragover",dragOver),b.addEventListener("dragenter",dragEnter),b.addEventListener("dragleave",dragLeave),b.addEventListener("drop",dragDrop),b.addEventListener("dragend",dragEnd)),document.getElementById("board").append(b)}document.getElementById("board").addEventListener("click",handleInteraction)};function handleInteraction(){document.getElementById("overlay").style.display="none",document.getElementById("timer").classList.add("timer-small"),startTimer(timerDuration),document.getElementById("board").removeEventListener("click",handleInteraction);let b=document.querySelectorAll(".draggable");b.forEach(b=>{b.removeEventListener("dragstart",handleInteraction)})}function startTimer(d){var e=document.getElementById("timer"),b=d;timer=setInterval(function(){let c=Math.floor(b/60),a=b%60;e.innerText=`${c}:${10>a?"0":""}${a}`,0>=b&&(clearInterval(timer),checkTimeUp()),b--},1e3)}function checkTimeUp(){isPuzzleSolved()||(console.log("Time's up! Redirecting to the complete image..."),showCompleteImage())}function dragStart(){this.classList.contains("fixed")||(currTile=this,console.log("Drag Start:",currTile.src))}function dragOver(b){b.preventDefault()}function dragEnter(b){b.preventDefault()}function dragLeave(){}function dragDrop(){this.classList.contains("fixed")||(otherTile=this,console.log("Drag Drop:",otherTile.src))}function dragEnd(){if(!(currTile.src.includes("blank")||otherTile.classList.contains("fixed"))){let d=currTile.src,a=otherTile.src;currTile.src=a,otherTile.src=d;let b=currTile.dataset.index;currTile.dataset.index=otherTile.dataset.index,otherTile.dataset.index=b,turns+=1,document.getElementById("turns").innerText=turns,console.log("Turns:",turns),5<=turns&&!redirected&&(redirected=!0,console.log("Redirecting..."),window.open("https://www.instagram.com/delamerekenya?igsh=NXFpaTlzdGQ3em54","_blank")),isPuzzleSolved()&&(clearInterval(timer),showCompleteImage())}}function isPuzzleSolved(){let c=document.querySelectorAll("#board img");for(let a=0;a<c.length;a++)if(c[a].dataset.index!=(a+1).toString())return!1;return!0}function showCompleteImage(){let c=document.getElementById("board");c.innerHTML="";let a=document.createElement("img");a.src="./assets/complete.png",a.style.width="100%",a.style.height="100%",a.classList.add("complete"),a.addEventListener("click",function(){window.open("https://www.carrefour.ke/mafken/en/plain-laban/ilara-maziwa-lala-bottle-500ml/p/43357?list_name=search%7Cillara_mazilla&offer=offer_carrefour_&utm_source=suss_ads_display_video&utm_medium=display&utm_campaign=dairy_best&utm_id=suss_ads&utm_term=display_video","_blank")}),c.appendChild(a)}